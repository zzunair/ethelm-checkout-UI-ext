import fs from 'fs';
import { apiConfigs } from './helpers/api-configs.mjs';
import { preset } from './preset.mjs';
import { getSchemaData } from './helpers/get-schema-data.mjs';

const shopifyApiTypes = ({ apiType, apiVersion, outputDir = ".", documents = ["**/*.{ts,tsx}", "!**/node_modules"], module, }) => {
    const config = apiConfigs[apiType];
    const { schema, schemaFile } = getSchemaData(outputDir, apiType, apiVersion);
    const schemaFileExists = fs.existsSync(`${schemaFile}`);
    return {
        ...(schemaFileExists
            ? {}
            : {
                [schemaFile]: {
                    schema,
                    plugins: ["introspection"],
                    config: { minify: true },
                },
            }),
        [`${outputDir}/${config.typesFile}`]: {
            schema: schemaFileExists ? schemaFile : schema,
            plugins: ["typescript"],
        },
        [`${outputDir}/${config.queryTypesFile}`]: {
            schema: schemaFileExists ? schemaFile : schema,
            preset,
            documents,
            presetConfig: { apiType, module },
        },
    };
};

export { shopifyApiTypes };
//# sourceMappingURL=api-types.mjs.map
